{const e=document.querySelector(".profile__friends__item__arrow");e.addEventListener("click",(t=>{e.closest(".profile__my").classList.remove("tab__open"),document.querySelector(".profile__friends__item.sub-item").classList.remove("_active"),[...document.querySelectorAll(".profile__friends__item:not(.sub-item)")].filter((e=>!e.classList.contains("different"))).forEach((e=>{e.classList.remove("fading")}))}))}document.querySelectorAll(".navigation__profile-img.clickable,.navigation__profile-info-name-age.clickable").forEach((e=>{e.addEventListener("click",(t=>{const s=e.closest(".profile__friends__item").nextElementSibling.children[0];s.parentNode.classList.add("_active"),s.classList.add("tab__open"),[...document.querySelectorAll(".profile__friends__item:not(.sub-item)")].filter((e=>!e.classList.contains("different"))).forEach((e=>{e.classList.add("fading")}))}))}));const labels=document.querySelectorAll(".messanger__content__contact");window.matchMedia("(max-width:700px)").matches||labels.forEach((e=>{e.addEventListener("click",(()=>{e.closest(".messanger__content__tab").querySelector(".messanger__content__chat").classList.add("_active")}),!1)})),document.querySelectorAll(".messanger__chat__headers__leave").forEach((e=>e.addEventListener("click",(e=>{const t=document.querySelector(".messanger__content__tab");t.querySelector(".messanger__content__chat").classList.remove("_active"),t.querySelector(".messanger__content__contacts").classList.add("_active")})))),document.querySelector(".filter__menu__cross").addEventListener("click",(function(e){const t=document.querySelectorAll(".filter__menu__item__checkbox"),s=[];t.forEach((e=>{const t=e.parentElement;if(e.checked&&t.classList.contains("_submenu")){const e=t.dataset.filterType;if(t.classList.contains("_range")){const o=t.nextElementSibling.nextElementSibling.childNodes;s.push([e,o[0].data,o[o.length-1].data])}else{const o=[];t.nextElementSibling.querySelectorAll(".filter__menu__item__checkbox").forEach((e=>{e.checked&&o.push(e.nextElementSibling.nextElementSibling.textContent)})),s.push([e,o])}}})),console.log(s);const o=[],n=document.querySelectorAll(".rating__content__items__item");n.forEach(((e,t)=>{((e,t)=>{s.forEach((s=>{const n=e.querySelector(`.rating__item__text.${s[0]}`);if(s[1]instanceof Array){if(!s[1].includes(n.textContent))return}else if("_level"===s[0]){const e=Number(n.textContent.split(" ")[0]);if(e<s[1]||e>s[2])return}else if(Number(n.textContent)<s[1]||Number(n.textContent)>s[2])return;o.push(t)}))})(e,t)}));let c="";for(const e of o)n[e].classList.add("_top-filtered"),c+=n[e].outerHTML;for(let e=0;e<n.length;e++)o.includes(e)||(c+=n[e].outerHTML);document.querySelector(".rating__content__items").innerHTML=c}),!1);export default function click(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t),e.click()}const storage=new Map,attribute="data-da",elements=document.querySelectorAll("[data-da]");export function formingData(){for(let e=0;e<elements.length;e++){const t=elements[e];let[s,o,n,c]=t.getAttribute("data-da").split(",");if(c=void 0===c?c="max":c){if("max"!==c&&"min"!==c)throw new Error("Invalid type");c="max"}storage.set(t,{destination:s,breakpoint:`(${c}-width: ${o}px)`,indexForDestination:n,parent:t.parentElement}),storage.get(t).indexInParent=Array.from(storage.get(t).parent.children).findIndex((e=>e.getAttribute("class")===t.getAttribute("class")))}}export const dynamicThrowing=()=>{!function(){for(let e=0;e<elements.length;e++){const t=elements[e],s=storage.get(t);if(window.matchMedia(s.breakpoint).matches){t.classList.add("_dynamic-adapted");const e=document.querySelector(s.destination);let o;if("number"==typeof Number(s.indexForDestination)&&Number(s.indexForDestination)-1<e.children.length)o=[...e.children].find(((e,t)=>t===Number(s.indexForDestination)));else if("first"===s.indexForDestination)o=e.firstChild;else{if(!("last"===s.indexForDestination||s.indexForDestination-1>=e.children.length))throw new Error("Invalid index of destination");o=null}e.insertBefore(t,o)}else if(t.classList.contains("_dynamic-adapted")){t.classList.remove("_dynamic-adapted");const e=[...s.parent.children].find(((e,t)=>t===s.indexInParent));s.parent.insertBefore(t,e)}}}()};export const dataChange=()=>{const e=document.querySelectorAll("[data-change]");for(let t=0;t<e.length;t++){const s=e[t],o=s.getAttribute("data-da").split(",")[3],n=s.getAttribute("data-da"),c=s.getAttribute("data-change"),r=c.split(",").splice(1,1/0);let l;(l=o?window.matchMedia(`(${o}-width: ${r}px)`).matches:window.matchMedia(`(max-width: ${r}px)`).matches)?s.classList.contains("dynamic_changed")||(s.classList.add("dynamic_changed"),s.setAttribute("data-da",c.split(",")),s.setAttribute("data-change",`${r},${n}`)):s.classList.contains("dynamic_changed")&&(s.classList.remove("dynamic_changed"),s.setAttribute("data-da",n),s.setAttribute("data-change",c))}};document.querySelector(".rating__labels__filter").addEventListener("click",(e=>{console.log("mrnu"),document.querySelector(".filter__menu").classList.add("_active__filter"),document.querySelector("html").classList.add("scrollbar"),document.querySelector(".header").classList.add("hidden"),document.querySelector(".filter__menu").scrollIntoView({block:"center",inline:"center"}),document.querySelector(".filter-menu__overlay").classList.add("_active__blur")})),document.querySelectorAll(".filter__menu__item._submenu .filter__menu__item__checkbox").forEach((e=>{e.addEventListener("change",(()=>{e.parentElement.nextElementSibling.classList.toggle("_active__sub-filter")}))}));{const t=document.querySelectorAll(".rating__content__titles__title");t.forEach((e=>{e.addEventListener("click",(()=>{const s=e.className.split(" ")[1],o=Array.from(document.querySelectorAll(`.rating__item__text.${s}`));isNaN(Number(o[0]))?o.sort(((e,t)=>{const s=e.textContent.split(" ")[0],o=t.textContent.split(" ")[0];return Number(s)>Number(o)?-1:Number(s)==Number(o)?0:Number(s)<Number(o)?1:void 0})):o.sort(((e,t)=>Number(e.textContent)>Number(t.textContent)?-1:Number(e.textContent)==Number(t.textContent)?0:Number(e.textContent)<Number(t.textContent)?1:void 0));const n=[...o];let c="";n.forEach((e=>{c+=e.closest(".rating__content__items__item").outerHTML})),document.querySelector(".rating__content__items").innerHTML=c,t.forEach((e=>{e.classList.remove("_filtered")})),e.classList.add("_filtered");const r=document.querySelectorAll(".rating__content__items__item");for(let e=0;e<3;e++)r[e].classList.add("_top-filtered")}))}))}function getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset}}function formChartInfo(e,t){if(1===e)return t.nextElementSibling.textContent.split("/")[0];if(2===e){const e=t.nextElementSibling.textContent.split("/");return e[1]-e[0]}}function formCutout(e){return window.matchMedia("(max-width:520px)").matches?e.closest(".task.tab-active-tasks-task")?40:28:e.closest(".modal-window")&&window.matchMedia("(max-width:750px)").matches?32:40}document.querySelectorAll("a").forEach((e=>{e.setAttribute("tabindex","-1")})),document.querySelectorAll(".task__chart").forEach((e=>{new Chart(e,{type:"doughnut",data:{labels:["Выполненные задания","Невыполненные задания"],datasets:[{label:"Задания",data:[formChartInfo(1,e),formChartInfo(2,e)],backgroundColor:[e.closest(".task").classList.contains("_failed")?"#fd3c60":"#26E27C","#fff"],hoverOffset:3}]},options:{cutout:40,plugins:{legend:{display:!1}}}})})),click(document.querySelectorAll(".library__tabs-title")[0]);const articles=document.querySelectorAll(".library__content__article");articles.forEach((e=>{e.addEventListener("click",(e=>{console.log("click"),document.querySelector(".library__content__page").classList.add("_open"),document.querySelector(".library__content").classList.add("_close")}),!1)}));const arrowBack=document.querySelector(".library__page__arrow__back").parentElement;function getCoord(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset}}arrowBack.addEventListener("click",(()=>{document.querySelector(".library__content__page").classList.remove("_open"),document.querySelector(".library__content").classList.remove("_close")})),document.querySelectorAll(".nav-menu__item").forEach((e=>{e.addEventListener("click",(t=>{const s=document.querySelector(`.tab.${e.dataset.tab}`);console.log(e),document.querySelector(".nav-menu__item.current").classList.remove("current"),document.querySelector(".tab._active-tab").classList.remove("_active-tab"),s.classList.add("_active-tab"),e.classList.add("current")}))})),document.querySelectorAll(".messanger__chat__writing__send").forEach((e=>{e.addEventListener("click",(()=>{const t=e.previousElementSibling.value;if(""===t)return!1;const s=new Date,o=`<div class="chat-messages__message _your">\n        <div class="chat-messages__message__text">${t}</div>\n        <div class="chat-messages__message__date">${s.getMinutes()>=10?`${s.getHours()}:${s.getMinutes()}`:`${s.getHours()}:0${s.getMinutes()}`}</div>\n      </div>`;e.closest(".messanger__chat__content").querySelector(".messanger__chat__content__msgs").insertAdjacentHTML("beforeend",o),e.previousElementSibling.value=""}))}));const modal=document.querySelector(".modal-window__container"),overlay=document.querySelector(".modal-window__overlay");function close(){document.querySelector(".header").classList.remove("hidden"),document.documentElement.classList.remove("scrollbar")}function open(){document.querySelector(".header").classList.add("hidden"),document.documentElement.classList.add("scrollbar")}{function closeModal(e){e.classList.remove("_active"),overlay.classList.remove("_shown"),close(),document.querySelector(".main").scrollIntoView({inline:"start"})}window.matchMedia("(max-width:700px)").matches&&document.querySelectorAll(".modal-window__task").forEach((e=>{e.classList.remove("task")})),document.querySelector(".task._modal"),window.addEventListener("click",(e=>{null!==e.target.closest("._modal")||e.target.classList.contains("_modal")?(modal.classList.add("_active"),overlay.classList.add("_shown"),open(),modal.scrollIntoView({block:"center",inline:"center"})):Boolean(e.target.closest(".profile__friends__select"))?document.querySelector(".profile__friends__select__menu").classList.contains("active-select")?document.querySelector(".profile__friends__select__menu").classList.remove("active-select"):document.querySelector(".profile__friends__select__menu").classList.add("active-select"):e.target.classList.contains("modal-window")&&closeModal(e.target),e.target.classList.contains("profile__friends__select")||document.querySelector(".profile__friends__select__menu").classList.remove("active-select"),(!e.target.closest(".filter__menu")&&document.querySelector(".filter__menu").classList.contains("_active__filter")&&!e.target.closest(".rating__labels__filter")||e.target.closest(".filter__menu__cross"))&&(document.querySelector(".filter-menu__overlay").classList.remove("_active__blur"),document.querySelector(".filter__menu").classList.remove("_active__filter"),document.querySelector("html").classList.remove("scrollbar"),document.querySelector(".header").classList.remove("hidden")),e.target.closest(".messanger__content__contact")&&window.matchMedia("(max-width:700px)").matches&&labels.forEach((e=>{e.addEventListener("click",(t=>{const s=e.closest(".messanger__content__tab");s.querySelector(".messanger__content__contacts").classList.remove("_active"),s.querySelector(".messanger__chat").classList.add("_active"),s.querySelector(".messanger__chat__headers__leave").classList.add("_shown")}))}))}),!1),document.addEventListener("click",(e=>{console.log(e.target),e.target.classList.contains("modal-window__overlay")&&closeModal(document.querySelector(".modal-window__container"))}));const s=document.querySelector(".modal-window__cross");s.addEventListener("click",(function(e){console.log("clic"),close(),closeModal(s.closest(".modal-window__container"))}))}formingData(),document.addEventListener("DOMContentLoaded",(e=>{dynamicThrowing()})),window.addEventListener("resize",(e=>{dataChange(),dynamicThrowing()}));import*as noUiSlider from"https://cdn.jsdelivr.net/npm/nouislider@15.7.1/+esm";{const o=document.querySelectorAll(".filter__menu__range");console.log(o),o.forEach((e=>{const t=e.nextElementSibling.firstChild,s=e.nextElementSibling.lastChild;noUiSlider.create(e,{start:[1e4,5e4],range:{min:[0],max:[8e4]},connect:!0,step:1}),e.noUiSlider.on("update",((e,o)=>{0==o?t.textContent=Number(e[o]).toFixed():1==o&&(s.textContent=Number(e[o]).toFixed())}))}))}{const n=document.querySelector(".header-options__item.other");function moveIntoMessanger(e){n.style.display="none",document.querySelector(".pin-code").classList.remove("_shown"),e&&document.querySelector(".tab._active-tab").classList.remove("_active-tab"),document.querySelector(".messanger").classList.add("_active")}let c,r=!0;n.addEventListener("click",(e=>{r?(document.querySelector(".pin-code").classList.add("_shown"),(c=document.querySelector(".tab._active-tab"))&&c.classList.remove("_active-tab"),r=!1):moveIntoMessanger(!0)}));const l=document.querySelectorAll(".pin-code__button"),a=document.querySelectorAll(".pin-code__input__chart");let i=0;l.forEach((e=>{e.addEventListener("click",(()=>{(e.classList.contains("erase")||e.classList.contains("delete_one"))&&0!==i?e.classList.contains("erase")?(a.forEach((e=>{e.value=""})),i=0):a[--i].value="":(a[i].value=e.textContent,4==++i&&setTimeout((()=>(moveIntoMessanger(),!1)),500))}))})),document.addEventListener("keydown",(e=>{if(document.querySelector(".pin-code").classList.contains("_shown")){const t=e.key;"Backspace"===t||"Delete"===t?i>0&&(a[i-1].value="",i--):isNaN(Number(t))||(a[i].value=t,4==++i&&setTimeout((()=>(moveIntoMessanger(),!1)),500))}})),document.querySelector(".messanger__labels__header__leave").addEventListener("click",(()=>{document.querySelector(".messanger").classList.remove("_active"),document.querySelector(".pin-code").classList.remove("_shown"),c&&c.classList.add("_active-tab"),n.style.display="inline-grid"}))}document.querySelector(".navigation__popup-arrow").addEventListener("click",(e=>{document.body.classList.toggle("navigation__popup-open")})),document.addEventListener("scroll",(e=>{document.body.classList.remove("navigation__popup-open"),document.querySelector(".profile__friends__select__menu").classList.remove("active-select")}));const{OverlayScrollbars,ScrollbarsHidingPlugin,SizeObserverPlugin,ClickScrollPlugin}=OverlayScrollbarsGlobal;let a=OverlayScrollbars(document.querySelector(".rating__content"),{className:"s"});const b=OverlayScrollbars(document.body,{className:"other"}),c=OverlayScrollbars(document.querySelector(".shop__modal__card"),{className:"ddd"}),u=OverlayScrollbars(document.querySelector(".modal-window__container"),{className:"ddd"}),f=OverlayScrollbars(document.querySelector(".messanger__content__contacts"),{className:"f"});document.querySelector(".profile__friends__select");var menu=document.querySelector(".profile__friends__select__menu");menu.addEventListener("click",(e=>{const t=document.querySelector(".profile__friends__select__text");e.target.classList.contains("profile__friends__select__text")?[t.textContent,e.target.textContent]=[e.target.textContent,t.textContent]:menu.classList.remove("active-select")}),!1),document.querySelector(".profile__friends__select").addEventListener("mouseover",(e=>{document.querySelector(".profile__friends__select__menu").classList.add("active-select")}));const cards=document.querySelectorAll(".shop__content__tab__card");cards.forEach((e=>{e.addEventListener("click",(e=>{e.target.classList.contains("shop__card__btn")||(document.querySelector(".shop__modal__card").classList.add("_active"),document.querySelector(".shop__modal__overlay").classList.add("_show"),open())}),!1)}));const first=document.querySelectorAll(".shop__card__btn"),second=document.querySelectorAll(".modal-card__content__btn");function closeShopModals(e){null==e?(e.closest(".shop__modal__card")?(document.querySelector(".shop__modal__card").classList.remove("_active"),document.querySelector(".shop__modal__overlay").classList.remove("_show")):(document.querySelector(".shop__modal__confirm").classList.remove("_active"),document.querySelector(".shop__modal__overlay").classList.remove("_show")),document.body.scrollIntoView()):((document.querySelector(".shop__modal__card").classList.contains("_active")?document.querySelector(".shop__modal__card"):document.querySelector(".shop__modal__confirm")).classList.remove("_active"),document.querySelector(".shop__modal__overlay").classList.remove("_show"),close(),document.body.scrollIntoView())}[...first,...second].forEach((e=>{e.addEventListener("click",(e=>{document.querySelector(".shop__modal__card").classList.remove("_active"),document.querySelector(".shop__modal__confirm").classList.add("_active"),document.querySelector(".shop__modal__overlay").classList.add("_show"),document.querySelector("html").classList.add("smt"),document.querySelector(".shop__modal__confirm").scrollIntoView({block:"center"})}))})),document.querySelectorAll(".modal__card__cross").forEach((e=>{e.addEventListener("click",(t=>{closeShopModals(e)}),!1)})),document.querySelector(".shop__modal__overlay").addEventListener("click",closeShopModals,!1);const confirmBtn=document.querySelector(".modal__confirm__btn");confirmBtn.addEventListener("click",(e=>{closeShopModals(confirmBtn.nextElementSibling)}));import Swiper from"https://cdn.jsdelivr.net/npm/swiper@10.2.0/swiper.mjs";import Navigation from"https://cdn.jsdelivr.net/npm/swiper@10.2.0/modules/navigation.min.mjs";const swiper1=new Swiper(".achievements__list__swiper",{modules:[Navigation],navigation:{nextEl:".achievements__list__swiper__arrow._next",prevEl:".achievements__list__swiper__arrow._prev"},spaceBetween:32,slidesPerView:7}),tabs=document.querySelectorAll(".content__tabs-title");function checkIfError(e){for(let t=0;t<e.children.length;t++)if(e.children[t].classList.contains("_active"))return!1;return!0}function createErrorMessage(e){const t=e.nextElementSibling?e.nextElementSibling:null;if(t&&t.classList.contains("alert-message"))t.classList.add("_show");else{const t='<span class="alert-message _show">Пожалуйста,выберите вариант ответа</span>';e.insertAdjacentHTML("afterend",t)}}function closeTest(){document.querySelector(".testing").classList.add("_active-tab"),document.querySelector(".test").classList.remove("_active-tab"),document.querySelector(".header").classList.remove("hidden"),document.querySelector("html").classList.remove("scrollbar")}tabs.forEach((e=>{const t=e.parentElement.querySelector(".content__tabs-title__marker");e.addEventListener("mouseover",(s=>{t.classList.remove("_fade-in"),t.style.width=e.offsetWidth+"px",t.style.translate=e.offsetLeft+"px"})),e.addEventListener("mouseleave",(e=>{t.classList.add("_fade-in")}))})),tabs.forEach((e=>{e.addEventListener("click",(t=>{let s;console.log("click"),t.preventDefault();const o=e.parentElement.querySelector(".content__tabs-title__marker");o.style.opacity="1";const n=document.querySelector(e.firstChild.getAttribute("href"));for(let e=0;e<tabs.length;e++)if(tabs[e].classList.contains("_active-tab-title")){s=tabs[e],tabs[e].classList.remove("_active-tab-title"),document.querySelector(tabs[e].firstChild.getAttribute("href")).classList.remove("tab-active");break}let c,r;if(s){s.getBoundingClientRect();const t=e.getBoundingClientRect(),o=e.parentElement.getBoundingClientRect().top;c=t.top-o,r=t.top-t.top}else c=0,r=0;setTimeout((()=>{e.classList.add("_active-tab-title")}),360),n.classList.add("tab-active"),o.style.width=e.offsetWidth+"px",o.style.transform=`translate(${r+"px"},${c+"px"})`}))}));const needToBeInitialized=[document.querySelector(".test__labels__info__img"),document.querySelector(".test__labels__timer"),document.querySelector(".test__questions__labels")],tests=document.querySelectorAll(".testing__content__test");tests.forEach((e=>{e.addEventListener("click",(()=>{needToBeInitialized.forEach((e=>{e.classList.remove("_hide")})),document.querySelector(".testing").classList.remove("_active-tab"),document.querySelector(".test").classList.add("_active-tab"),initTimer()}),!1)}));const answers=document.querySelectorAll(".test__questions__answer");answers.forEach((e=>{e.addEventListener("click",(t=>{answers.forEach((e=>{e.classList.remove("_active")})),e.classList.add("_active")}))}));const buttons=document.querySelectorAll(".test__questions__btn");buttons.forEach((e=>{e.addEventListener("click",(()=>{let t=e.closest(".test__questions__answers");if(console.log(t,checkIfError(t)),checkIfError(t))createErrorMessage(e);else if(t.classList.remove("_active"),t.nextElementSibling&&t.nextElementSibling.classList.add("_active"),e.classList.contains("_last"))document.querySelector(".test__result").classList.add("_active"),needToBeInitialized.forEach((e=>{e.classList.add("_hide")}));else{const e=document.querySelector(".test__questions__labels__pagination");e.textContent=`${+e.textContent.split("/")[0]+1}/${e.textContent.split("/")[1]}`}}))}));const exitAfterResults=document.querySelector(".test__result__cross");exitAfterResults.addEventListener("click",closeTest,!1);const exitDuringTets=document.querySelector(".test__labels__info__img");exitDuringTets.addEventListener("click",(e=>{document.querySelector(".test__overlay").classList.add("_active"),document.querySelector(".test__result__modal").classList.add("_show"),document.querySelector("html").classList.add("scrollbar"),document.querySelector(".header").classList.add("hidden"),document.querySelector(".test__result__modal").scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}));const btnYes=document.querySelector(".test__result__btn._yes"),btnNo=document.querySelector(".test__result__btn._no");function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function initTimer(e){const t=document.querySelector(".test__labels__timer");setInterval((function(){const s=t.textContent,[o,n]=s.split(":");let c;"00"===n?c=+o-1+":59":"00"===o&&"01"===n?e():c=+n>=10?`${o}:${+n-1}`:`${o}:0${+n-1}`,t.textContent=c}),1e3)}btnYes.addEventListener("click",(e=>{closeTest(),document.querySelector(".test__overlay").classList.remove("_active"),document.querySelector(".test__result__modal").classList.remove("_show")}),!1),btnNo.addEventListener("click",(e=>{document.querySelector(".test__overlay").classList.remove("_active"),document.querySelector(".test__result__modal").classList.remove("_show"),document.querySelector("html").classList.remove("scrollbar"),document.querySelector(".header").classList.remove("hidden")})),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));
